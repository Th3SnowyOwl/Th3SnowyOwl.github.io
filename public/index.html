<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Classroom</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="icon" type="image/png" href="//ssl.gstatic.com/classroom/favicon.png">
    
<style>
p{
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
    color: rgb(230, 184, 0);
}
body{
  background-color: gray;
  background-image: url(sitebackground.png);
}
video{
      display: block;
      margin: 0 auto;
    }  
btn_fetch {
   -webkit-border-radius: 7px;
   -moz-border-radius: 7px;
   border-radius: 7px;
   color: #000000;
   font-weight: 100;
   padding: 20px;
   background-color: #D2D573;
   box-shadow: 1px 1px 20px 0px rgba(255, 255, 255, 0.44);
   -webkit-box-shadow: 1px 1px 20px 0px rgba(255, 255, 255, 0.44);
   -moz-box-shadow: 1px 1px 20px 0px rgba(255, 255, 255, 0.44);
   border: solid #FFFFFF 0px;
   text-decoration: none;
   display: inline-block;
   cursor: pointer;
   text-align: center;
} 
</style>
    
</head>
<body>
<a href="https://th3snowyowl.github.io/">Back To Main Site</a>


    
    
    
    <div class="hider">
<form>
    <input type="text" value="https://www.youtube.com/watch?v=YddwkMJG1Jo" size="80" id="txt_url">
    <input type="button" id="btn_fetch" value="Get From Youtube">
</form>

<video width="800" height="600" controls autoplay>
    <source src="" type="video/mp4"/>
    <em>Sorry, your browser doesn't support HTML5 video.</em>
</video>
    </div>

<script>
    $(function () {

        $("#btn_fetch").click(function () {

            var url = $("#txt_url").val();

            var oThis = $(this);
            oThis.attr('disabled', true);

            $.get('video_info.php', {url: url}, function (data) {

                console.log(data);

                oThis.attr('disabled', false);

                var links = data['links'];
                var error = data['error'];

                if (error) {
                    alert('Error: ' + error);
                    return;
                }

                // first link with video
                var first = links.find(function (link) {
                    return link['format'].indexOf('video') !== -1;
                });

                if (typeof first === 'undefined') {
                    alert('No video found!');
                    return;
                }

                var stream_url = 'stream.php?url=' + encodeURIComponent(first['url']);

                var video = $("video");
                video.attr('src', stream_url);
                video[0].load();
            });

        });

    });
</script>

</body>
</html>

